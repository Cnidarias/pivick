<p-table
  [loading]="isLoading"
  [resizableColumns]="true"
  [rowHover]="!isRowSpanningEnabled"
  [rowsPerPageOptions]="availableRowCounts"
  [rows]="selectedRows"
  [scrollable]="true"
  [value]="tableData"
  class="pivick-table"
  scrollHeight="100%"
  showGridlines
  size="small"
>
  <ng-template #header>
    <tr>
      @for (column of tableColumns; track column.key) {
      <th
        [class.dimension-column-header]="pivickAnalysis.isDimensionByKey(column.key)"
        [class.measure-column-header]="pivickAnalysis.isMeasureByKey(column.key)"
      >
        {{ pivickAnalysis.getLabelByKey(column.key) }}
      </th>
      }
    </tr>
  </ng-template>
  <ng-template #body let-data let-rowIndex="rowIndex">
    <tr>
      @for (column of tableColumns; track column.key) {
      @if(isRowSpanningEnabled) { @let rowSpan = calculateRowSpan(column.key,
      rowIndex); @if (rowSpan > -1) {
      <td [attr.rowspan]="rowSpan" [pTooltip]="data[column.key]">
        {{ data[column.key] }}
      </td>
      } } @else {
      <td>{{ data[column.key] }}</td>
      } }
    </tr>
  </ng-template>
</p-table>
